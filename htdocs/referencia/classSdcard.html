<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libWiiEsp: Referencia de la Clase Sdcard</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generado por Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Buscar');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libWiiEsp&#160;<span id="projectnumber">0.9.2</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Página&#160;principal</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Clases</span></a></li>
      <li><a href="files.html"><span>Archivos</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Lista&#160;de&#160;clases</span></a></li>
      <li><a href="classes.html"><span>Índice&#160;de&#160;clases</span></a></li>
      <li><a href="inherits.html"><span>Jerarquía&#160;de&#160;la&#160;clase</span></a></li>
      <li><a href="functions.html"><span>Miembros&#160;de&#160;las&#160;clases</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Métodos públicos</a> &#124;
<a href="#pub-static-methods">Métodos públicos estáticos</a> &#124;
<a href="#pro-methods">Métodos protegidos</a>  </div>
  <div class="headertitle">
<h1>Referencia de la Clase Sdcard</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Sdcard" -->
<p>Clase que gestiona la ranura para tarjetas SD de la consola Wii.  
<a href="#_details">Más...</a></p>

<p><code>#include &lt;<a class="el" href="sdcard_8h_source.html">sdcard.h</a>&gt;</code></p>

<p><a href="classSdcard-members.html">Lista de todos los miembros.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Métodos públicos</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#ae870936e270136ac357a45e4a89d6a51">inicializar</a> (const std::string &amp;unidad=&quot;SD&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#a3835ab789022c34ab3e22f3272d27b15">unidad</a> (void) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#a012dac89a2271c21d51c8593c04d8bd6">montada</a> (void) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#a30a0e3e743384b9850ba4cf91056c777">desmontar</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#a5d82a5635783a087db886594af52cefb">existe</a> (const std::string &amp;archivo)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Métodos públicos estáticos</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classSdcard.html">Sdcard</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#aac644770bab0cd23777b924858d73572">get_instance</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#ab51e5c2cdfe213d02573d87664076e3b">destroy</a> (void)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Métodos protegidos</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#aabeb9a8fcf5e3418cfe1ccf711ec84c9">Sdcard</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#a42fbccefd059567a4679bc94596ee92b">~Sdcard</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#aa0d2da727c51ff7a7034a49b124f7d05">Sdcard</a> (const <a class="el" href="classSdcard.html">Sdcard</a> &amp;l)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSdcard.html">Sdcard</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdcard.html#a730ff35dd1711ec53bb0a7900332c197">operator=</a> (const <a class="el" href="classSdcard.html">Sdcard</a> &amp;l)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Descripción detallada</h2>
<div class="textblock"><p>Clase que gestiona la ranura para tarjetas SD de la consola Wii. </p>
<dl class="author"><dt><b>Autor:</b></dt><dd>Ezequiel Vázquez de la Calle </dd></dl>
<dl class="version"><dt><b>Versión:</b></dt><dd>0.9.2</dd></dl>
<p>Esta clase implementa un patrón Singleton, debido a que la consola Nintendo Wii sólo dispone de una ranura lectora de tarjetas SD. Además, para desarrollar juegos y aplicaciones relativamente sencillas en dos dimensiones, sólo se necesita acceder a un único dispositivo de almacenamiento masivo, por lo que se ha decidido no desarrollar más allá que esta clase.</p>
<p>Es cierto que la libogc puede permitir acceder a dispositivos USB de almacenamiento (comúnmente conocidos como "lápices usb"), pero se ha descartado implementar esta funcionalidad en la biblioteca, tanto por simplificar su utilización, como por ahorro de tiempo. Está planeado, en un futuro, implementar soporte para dispositivos USB.</p>
<p>Siguiendo con la norma de la sencillez, la clase <a class="el" href="classSdcard.html" title="Clase que gestiona la ranura para tarjetas SD de la consola Wii.">Sdcard</a> sólo puede montar una única partición. El formato en el que debe estar dicha partición es FAT o FAT32, ya que la biblioteca auxiliar que utiliza libogc para montar unidades y particiones es una implementación para Wii de libfat.</p>
<p>Funcionamiento interno</p>
<p>La mecánica interna de esta clase se basa en realizar diez intentos de montar la primera partición de la tarjeta SD insertada en la ranura de la consola. Si fallaran los diez intentos, la clase sale del programa con un código de error 1.</p>
<p>El proceso que se sigue al intentar montar una partición consiste en inicializar el hardware del lector de tarjetas. Si esto se consigue, se intenta montar, con un sistema de archivos FAT o FAT32, la primera partición válida de la tarjeta SD. Si no se consigue, se apaga el hardware de la ranura, se contabiliza el intento, y se prueba de nuevo con el mismo proceso.</p>
<p>Hay que tener en cuenta que una tarjeta puede tener varias particiones, y éstas pueden ser de distintos sistemas de archivos. Pues bien, esta clase espera que la primera partición esté formateada como FAT/FAT32, porque es la única a la que puede acceder. Así pues, queda bajo la responsabilidad del usuario la correcta preparación de la SD para poder utilizar esta clase.</p>
<p>Utilización de la clase</p>
<p>Cuando todo sale bien, se monta la partición con el nombre de unidad que se recibe por parámetro en el método inicializador, y se pone a disposición del resto del sistema una serie de funciones para conocer el nombre de esta unidad, saber si la partición está montada o no, y para desmontarla en cualquier momento. Si se desmonta (por el motivo que sea) la unidad, se puede volver a utilizar inicializándola de nuevo.</p>
<p>Generalmente, esta clase se inicia al principio del programa, y se desmonta al final, ya que si se utiliza también la clase <a class="el" href="classLogger.html" title="Sistema de registro de mensajes de información, aviso o error en un archivo de texto plano en la SD...">Logger</a> (consultar documentación de dicha clase), ésta realiza la escritura al final de la ejecución.</p>
<p>Para realizar una operación de lectura y/o escritura, basta con anteponer el nombre de la unidad, seguida de dos puntos (:), y después la dirección absoluta del recurso a cargar/modificar en formato UNIX (por ejemplo, string( sdcard-&gt;<a class="el" href="classSdcard.html#a3835ab789022c34ab3e22f3272d27b15">unidad()</a> + ':' + '/apps/wiipang/xml/media.xml' ) sería la forma de abrir el archivo media.xml).</p>
<p>Unos últimos detalles. La propia implementación del patrón Singleton se encarga de que se destruya la instancia activa de la clase en el sistema al salir del programa mediante la instrucción exit().También hay que tener en cuenta que las clases que encapsulan recursos media (como la clase <a class="el" href="classImagen.html" title="Clase que representa una imagen cargada en memoria, lista para ser dibujada en la pantalla...">Imagen</a>, o la clase <a class="el" href="classMusica.html" title="Clase que representa una pista de música que puede ser reproducida en la consola Nintendo Wii...">Musica</a>) requieren que <a class="el" href="classSdcard.html" title="Clase que gestiona la ranura para tarjetas SD de la consola Wii.">Sdcard</a> haya montado previamente la unidad FAT/FAT32 sobre la que se van a realizar las operaciones de entrada y salida.</p>
<p>Pequeño ejemplo de uso:</p>
<div class="fragment"><pre class="fragment">    <span class="comment">// Inicializar el lector de tarjetas, y montar una unidad llamada &#39;SD&#39;</span>
    sdcard-&gt;inicializar(<span class="stringliteral">&quot;SD&quot;</span>);

 <span class="comment">// Guardar en un std::string el nombre de la unidad</span>
 std::string <a class="code" href="classSdcard.html#a3835ab789022c34ab3e22f3272d27b15">unidad</a> = sdcard-&gt;unidad();

 <span class="comment">// Saber si está montada la partición; si lo está desmontarla</span>
 <span class="keywordflow">if</span> ( sdcard-&gt;montada() )
        sdcard-&gt;desmontar();
</pre></div> </div><hr/><h2>Documentación del constructor y destructor</h2>
<a class="anchor" id="aabeb9a8fcf5e3418cfe1ccf711ec84c9"></a><!-- doxytag: member="Sdcard::Sdcard" ref="aabeb9a8fcf5e3418cfe1ccf711ec84c9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sdcard::Sdcard </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor de la clase <a class="el" href="classSdcard.html" title="Clase que gestiona la ranura para tarjetas SD de la consola Wii.">Sdcard</a>. Se encuentra en la zona protegida debido a la implementación del patrón Singleton. </p>

</div>
</div>
<a class="anchor" id="a42fbccefd059567a4679bc94596ee92b"></a><!-- doxytag: member="Sdcard::~Sdcard" ref="a42fbccefd059567a4679bc94596ee92b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sdcard::~Sdcard </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destructor de la clase <a class="el" href="classSdcard.html" title="Clase que gestiona la ranura para tarjetas SD de la consola Wii.">Sdcard</a>. Se encuentra en la zona protegida debido a la implementación del patrón Singleton. Desmonta la partición si estuviera montada. </p>

</div>
</div>
<a class="anchor" id="aa0d2da727c51ff7a7034a49b124f7d05"></a><!-- doxytag: member="Sdcard::Sdcard" ref="aa0d2da727c51ff7a7034a49b124f7d05" args="(const Sdcard &amp;l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sdcard::Sdcard </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSdcard.html">Sdcard</a> &amp;&#160;</td>
          <td class="paramname"><em>l</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor de copia de la clase <a class="el" href="classSdcard.html" title="Clase que gestiona la ranura para tarjetas SD de la consola Wii.">Sdcard</a>. Se encuentra en la zona protegida debido a la implementación del patrón Singleton. </p>

</div>
</div>
<hr/><h2>Documentación de las funciones miembro</h2>
<a class="anchor" id="a30a0e3e743384b9850ba4cf91056c777"></a><!-- doxytag: member="Sdcard::desmontar" ref="a30a0e3e743384b9850ba4cf91056c777" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Sdcard::desmontar </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Método que desmonta la partición de la unidad. Si no estuviera montada, no hace nada. </p>

</div>
</div>
<a class="anchor" id="ab51e5c2cdfe213d02573d87664076e3b"></a><!-- doxytag: member="Sdcard::destroy" ref="ab51e5c2cdfe213d02573d87664076e3b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void Sdcard::destroy </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Método de clase que limpia la memoria ocupada por la instancia activa en el sistema de la clase <a class="el" href="classSdcard.html" title="Clase que gestiona la ranura para tarjetas SD de la consola Wii.">Sdcard</a>, llamando a su destructor. </p>

</div>
</div>
<a class="anchor" id="a5d82a5635783a087db886594af52cefb"></a><!-- doxytag: member="Sdcard::existe" ref="a5d82a5635783a087db886594af52cefb" args="(const std::string &amp;archivo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Sdcard::existe </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>archivo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Método que comprueba si un archivo existe en la tarjeta SD. </p>
<dl><dt><b>Parámetros:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">archivo</td><td>Ruta absoluta del archivo que se quiere comprobar. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aac644770bab0cd23777b924858d73572"></a><!-- doxytag: member="Sdcard::get_instance" ref="aac644770bab0cd23777b924858d73572" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classSdcard.html">Sdcard</a>* Sdcard::get_instance </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Método de clase que devuelve la dirección de memoria de la instancia activa en el sistema de la clase <a class="el" href="classSdcard.html" title="Clase que gestiona la ranura para tarjetas SD de la consola Wii.">Sdcard</a>. Si aún no existe dicha instancia, la crea y la devuelve. Además, establece que al salir del programa, se destruya por medio de una llamada al destructor. </p>

</div>
</div>
<a class="anchor" id="ae870936e270136ac357a45e4a89d6a51"></a><!-- doxytag: member="Sdcard::inicializar" ref="ae870936e270136ac357a45e4a89d6a51" args="(const std::string &amp;unidad=&quot;SD&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Sdcard::inicializar </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>unidad</em> = <code>&quot;SD&quot;</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Método que inicializa la clase. Intenta montar la primera partición válida de la tarjeta SD insertada en la consola, utilizando un sistema de archivos FAT/FAT32. Se realizan diez intentos, si no se ha conseguido un montaje correcto tras dichos intentos, se sale de programa con código de error 1. </p>
<dl><dt><b>Parámetros:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">unidad</td><td>Nombre de unidad que se le asignará a la partición montada. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a012dac89a2271c21d51c8593c04d8bd6"></a><!-- doxytag: member="Sdcard::montada" ref="a012dac89a2271c21d51c8593c04d8bd6" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Sdcard::montada </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Método consultor para saber si la unidad está montada o no. </p>
<dl class="return"><dt><b>Devuelve:</b></dt><dd>Devuelve verdadero si la unidad está montada, o falso en caso contrario. </dd></dl>

</div>
</div>
<a class="anchor" id="a730ff35dd1711ec53bb0a7900332c197"></a><!-- doxytag: member="Sdcard::operator=" ref="a730ff35dd1711ec53bb0a7900332c197" args="(const Sdcard &amp;l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSdcard.html">Sdcard</a>&amp; Sdcard::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSdcard.html">Sdcard</a> &amp;&#160;</td>
          <td class="paramname"><em>l</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Operador de asignación de la clase <a class="el" href="classSdcard.html" title="Clase que gestiona la ranura para tarjetas SD de la consola Wii.">Sdcard</a>. Se encuentra en la zona protegida debido a la implementación del patrón Singleton. </p>

</div>
</div>
<a class="anchor" id="a3835ab789022c34ab3e22f3272d27b15"></a><!-- doxytag: member="Sdcard::unidad" ref="a3835ab789022c34ab3e22f3272d27b15" args="(void) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; Sdcard::unidad </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Método consultor para el nombre de la unidad asignado a la partición montada </p>
<dl class="return"><dt><b>Devuelve:</b></dt><dd>Nombre de la unidad asignado a la partición montada </dd></dl>

</div>
</div>
<hr/>La documentación para esta clase fue generada a partir del siguiente fichero:<ul>
<li>/home/rabbit/Escritorio/libwiiesp/include/<a class="el" href="sdcard_8h_source.html">sdcard.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Todo</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Clases</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Funciones</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>&apos;typedefs&apos;</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumeraciones</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generado el Martes, 19 de Julio de 2011 20:45:53 para libWiiEsp por&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
